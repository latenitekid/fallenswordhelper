import{a as c,c as _,d as h,e as m,g as y}from"./chunk-ZYLGT2XQ.js";var f=[];function z(t,i){return{subscribe:A(t,i).subscribe}}function A(t,i=c){let o,s=new Set;function b(n){if(m(t,n)&&(t=n,o)){let r=!f.length;for(let e of s)e[1](),f.push(e,t);if(r){for(let e=0;e<f.length;e+=2)f[e][0](f[e+1]);f.length=0}}}function a(n){b(n(t))}function l(n,r=c){let e=[n,r];return s.add(e),s.size===1&&(o=i(b)||c),n(t),()=>{s.delete(e),s.size===0&&(o(),o=null)}}return{set:b,update:a,subscribe:l}}function j(t,i,o){let s=!Array.isArray(t),b=s?[t]:t,a=i.length<2;return z(o,l=>{let n=!1,r=[],e=0,p=c,g=()=>{if(e)return;p();let u=i(s?r[0]:r,l);a?l(u):p=h(u)?u:c},q=b.map((u,d)=>y(u,x=>{r[d]=x,e&=~(1<<d),n&&g()},()=>{e|=1<<d}));return n=!0,g(),function(){_(q),p()}})}export{A as a,j as b};
//# sourceMappingURL=chunk-VIJWFUGH.js.map
