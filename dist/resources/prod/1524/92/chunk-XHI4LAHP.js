import{b as p}from"./chunk-BK2AP6XG.js";import{a}from"./chunk-GQTCWOPY.js";import{a as $}from"./chunk-B2RQR7FO.js";import{a as E}from"./chunk-VT3LH7JR.js";import{a as h}from"./chunk-UECO6BBS.js";import{b as k}from"./chunk-MY4OO5AP.js";import{a as m}from"./chunk-5KGM3LZY.js";import{a as c}from"./chunk-DI3XCMNE.js";import{a as C}from"./chunk-ERGFRBX5.js";import{a as T}from"./chunk-EKBYY3JQ.js";import{a as r}from"./chunk-2IOAHVVN.js";import{a as y}from"./chunk-WE2GCAKX.js";import{a as w}from"./chunk-WTCWPEJX.js";import{a as u}from"./chunk-RUEPLNRL.js";import{b as x}from"./chunk-EZ536MXS.js";import{a as i}from"./chunk-BYAZQWO5.js";import{a as B}from"./chunk-MR322WHU.js";function s(t){B.subcmd==="-"&&w("profile",t)}var L=[[t=>t.fsp>0,t=>`${p(t.fsp,2)} FSP`],[t=>t.fsp>0&&t.k>0,()=>" and "],[t=>t.k>0,t=>`${t.k} k`],[t=>t.stam>0&&(t.fsp>0||t.k>0),()=>" and "],[t=>t.stam>0,t=>`${t.stam} Stam(${p(t.stam/25,1)}fsp)`],[t=>t.unknown>0,t=>` (${t.unknown} buff(s) with unknown cost)`]];function R(t,e){return e[0](t)?e[1](t):""}function l(t){return L.map(u(R,t)).join("")}function F(){let t=T("h1",k());return t.length!==0?t=r(t[0]):t=$(),t}var j=[[t=>!t.includes("{buffs}"),(t,e)=>`${t} ${e}`],[t=>!t.includes("{cost}"),(t,e)=>t.replace(/{buffs}/g,`\`~${e}~\``)],[()=>!0,(t,e,n)=>t.replace(/{buffs}/g,`\`~${e}~\``).replace(/{cost}/g,n.buffCostTotalText)]];function A(t,e){return e[0](t)}function I(t,e){return j.find(u(A,t))[1](t,C(e.buffs).join(", "),e)}function M(t){s("formatBuffsToBuy");let e=F(),n=h(x("buyBuffsGreeting"));n=n.replace(/{playername}/g,e),n=I(n,t),window.openQuickMsgDialog(e,n,"")}function g(t){t.count>0&&M(t)}var z=/[^a-zA-Z0-9.,+\- ]/g,d=0,G=["(?<k>[+-]?[.\\d]{1,10} {0,10}k)","(?<fsp>[+-]?[.\\d]{1,10} {0,10}fsp)","(?<stam>[+-]?[.\\d]{1,10} {0,10}stam)"];function H(){return d||(d=new RegExp(G.join("|"))),d}function S(t){return t&&t.nodeName!=="BR"}function P(t){return i(H(),E(t.replace(z,"")))}function U(t){let e="",n=t;for(;S(n);){let f=r(n);n=n.nextSibling,e+=f}return P(e)}function D(t){let e="",n=t;for(;S(n);){let f=r(n);n=n.previousSibling,e=f+e}return P(e)}function b(t){let e=U(t);return e||(e=D(t)),e}var o={count:0,buffs:{}};function O(t){return`<tr><td>${t[0]}</td><td>: ${t[1][0]}${t[1][1]}</td></tr>`}function Q(t,e){return t[e[1][1]]+=e[1][0],t}function V(){let t=y(o.buffs),e=l(t.reduce(Q,{k:0,fsp:0,stam:0,unknown:0}));m(`<span class="tip-static" data-tipped="This is an estimated cost based on how the script finds the cost associated with buffs from viewing bio. It can be incorrect, please use with discretion.<br><hr><table border=0>${t.map(O).join("")}</table><b>Total: ${e}</b>">Estimated Cost: <b>${e}</b></span>`,c("buffCost")),o.buffCostTotalText=e}function Y(){o.count>0?V():(m("&nbsp;",c("buffCost")),o.buffCostTotalText="")}function Z(t){return t[0].includes("k")?"k":t[0].includes("f")?"fsp":"stam"}function q(t){let e=b(t),n="unknown",f="1";e&&(n=Z(e),[f]=i(/[+-]?[.\d]+/,e[0])),o.buffs[r(t)]=[parseFloat(f),n],o.count+=1}function J(t){s("toggleBuffsToBuy");let e=a("fshBlue",t);t.classList.toggle("fshBlue"),t.classList.toggle("fshYellow");let n=r(t);e?q(t):(o.count-=1,delete o.buffs[n]),Y()}function v(t){return!t.tagName||t.tagName==="SPAN"?t:v(t.parentNode)}function K(t){return t.classList&&a("buffLink",t)}function W(t){if(t.target.id==="fshSendBuffMsg"){g(o);return}let e=v(t.target);K(e)&&J(e)}function X(t,e,n){return t.replace(e,`<span id="fshBuff${n}" class="buffLink fshBlue">${e.replace(/(`~)|(~`)|(\{b\})|(\{\/b\})/g,"")}</span>`)}function _(t){let e=t.replace(/\{b\}/g,"`~").replace(/\{\/b\}/g,"~`"),n=e.match(/`~([^~]|~(?!`))*~`/g);if(!!n)return e=n.reduce(X,e),e.indexOf("[cmd]")<0&&(e+="[cmd]"),e=e.replace("[cmd]",'<br><input id="fshSendBuffMsg" class="custombutton" type="button" value="Ask For Buffs"><br><span id="buffCost" class="fshRed">&nbsp;</span>'),e}export{W as a,_ as b};
//# sourceMappingURL=chunk-XHI4LAHP.js.map
